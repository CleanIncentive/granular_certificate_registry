2025-01-10 11:44:10 gc_registry-1    | 2025-01-10 11:44:10,696 [DEBUG] multipart.multipart: Calling on_field_start with no data
2025-01-10 11:44:10 gc_registry-1    | 2025-01-10 11:44:10,697 [DEBUG] multipart.multipart: Calling on_field_name with data[0:10]
2025-01-10 11:44:10 gc_registry-1    | 2025-01-10 11:44:10,697 [DEBUG] multipart.multipart: Calling on_field_data with data[11:19]
2025-01-10 11:44:10 gc_registry-1    | 2025-01-10 11:44:10,697 [DEBUG] multipart.multipart: Calling on_field_end with no data
2025-01-10 11:44:10 gc_registry-1    | 2025-01-10 11:44:10,697 [DEBUG] multipart.multipart: Calling on_field_start with no data
2025-01-10 11:44:10 gc_registry-1    | 2025-01-10 11:44:10,697 [DEBUG] multipart.multipart: Calling on_field_name with data[20:28]
2025-01-10 11:44:10 gc_registry-1    | 2025-01-10 11:44:10,698 [DEBUG] multipart.multipart: Calling on_field_data with data[29:34]
2025-01-10 11:44:10 gc_registry-1    | 2025-01-10 11:44:10,698 [DEBUG] multipart.multipart: Calling on_field_end with no data
2025-01-10 11:44:10 gc_registry-1    | 2025-01-10 11:44:10,698 [DEBUG] multipart.multipart: Calling on_field_start with no data
2025-01-10 11:44:10 gc_registry-1    | 2025-01-10 11:44:10,698 [DEBUG] multipart.multipart: Calling on_field_name with data[35:43]
2025-01-10 11:44:10 gc_registry-1    | 2025-01-10 11:44:10,698 [DEBUG] multipart.multipart: Calling on_field_data with data[44:49]
2025-01-10 11:44:10 gc_registry-1    | 2025-01-10 11:44:10,698 [DEBUG] multipart.multipart: Calling on_field_end with no data
2025-01-10 11:44:10 gc_registry-1    | 2025-01-10 11:44:10,698 [DEBUG] multipart.multipart: Calling on_field_start with no data
2025-01-10 11:44:10 gc_registry-1    | 2025-01-10 11:44:10,698 [DEBUG] multipart.multipart: Calling on_field_name with data[50:55]
2025-01-10 11:44:10 gc_registry-1    | 2025-01-10 11:44:10,698 [DEBUG] multipart.multipart: Calling on_field_end with no data
2025-01-10 11:44:10 gc_registry-1    | 2025-01-10 11:44:10,698 [DEBUG] multipart.multipart: Calling on_field_start with no data
2025-01-10 11:44:10 gc_registry-1    | 2025-01-10 11:44:10,699 [DEBUG] multipart.multipart: Calling on_field_name with data[57:66]
2025-01-10 11:44:10 gc_registry-1    | 2025-01-10 11:44:10,699 [DEBUG] multipart.multipart: Calling on_field_data with data[67:73]
2025-01-10 11:44:10 gc_registry-1    | 2025-01-10 11:44:10,699 [DEBUG] multipart.multipart: Calling on_field_end with no data
2025-01-10 11:44:10 gc_registry-1    | 2025-01-10 11:44:10,699 [DEBUG] multipart.multipart: Calling on_field_start with no data
2025-01-10 11:44:10 gc_registry-1    | 2025-01-10 11:44:10,699 [DEBUG] multipart.multipart: Calling on_field_name with data[74:87]
2025-01-10 11:44:10 gc_registry-1    | 2025-01-10 11:44:10,699 [DEBUG] multipart.multipart: Calling on_field_data with data[88:94]
2025-01-10 11:44:10 gc_registry-1    | 2025-01-10 11:44:10,699 [DEBUG] multipart.multipart: Calling on_field_end with no data
2025-01-10 11:44:10 gc_registry-1    | 2025-01-10 11:44:10,699 [DEBUG] multipart.multipart: Calling on_end with no data
2025-01-10 11:44:10 db_read-1        | 2025-01-10 11:44:10.741 UTC [61] ERROR:  relation "registry_user" does not exist at character 240
2025-01-10 11:44:10 db_read-1        | 2025-01-10 11:44:10.741 UTC [61] STATEMENT:  SELECT registry_user.created_at, registry_user.name, registry_user.primary_contact, registry_user.role, registry_user.hashed_password, registry_user.is_deleted, registry_user.id, registry_user.account_ids, registry_user.organisation 
2025-01-10 11:44:10 db_read-1        |  FROM registry_user 
2025-01-10 11:44:10 db_read-1        |  WHERE registry_user.name = 'Admin'
2025-01-10 11:44:10 gc_registry-1    | INFO:     172.18.0.1:40288 - "POST /auth/login HTTP/1.1" 500 Internal Server Error
2025-01-10 11:44:10 gc_registry-1    | ERROR:    Exception in ASGI application
2025-01-10 11:44:10 gc_registry-1    | Traceback (most recent call last):
2025-01-10 11:44:10 gc_registry-1    |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
2025-01-10 11:44:10 gc_registry-1    |     self.dialect.do_execute(
2025-01-10 11:44:10 gc_registry-1    |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
2025-01-10 11:44:10 gc_registry-1    |     cursor.execute(statement, parameters)
2025-01-10 11:44:10 gc_registry-1    | psycopg2.errors.UndefinedTable: relation "registry_user" does not exist
2025-01-10 11:44:10 gc_registry-1    | LINE 2: FROM registry_user 
2025-01-10 11:44:10 gc_registry-1    |              ^
2025-01-10 11:44:10 gc_registry-1    | 
2025-01-10 11:44:10 gc_registry-1    | 
2025-01-10 11:44:10 gc_registry-1    | The above exception was the direct cause of the following exception:
2025-01-10 11:44:10 gc_registry-1    | 
2025-01-10 11:44:10 gc_registry-1    | Traceback (most recent call last):
2025-01-10 11:44:10 gc_registry-1    |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 406, in run_asgi
2025-01-10 11:44:10 gc_registry-1    |     result = await app(  # type: ignore[func-returns-value]
2025-01-10 11:44:10 gc_registry-1    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-01-10 11:44:10 gc_registry-1    |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
2025-01-10 11:44:10 gc_registry-1    |     return await self.app(scope, receive, send)
2025-01-10 11:44:10 gc_registry-1    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-01-10 11:44:10 gc_registry-1    |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
2025-01-10 11:44:10 gc_registry-1    |     await super().__call__(scope, receive, send)
2025-01-10 11:44:10 gc_registry-1    |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 123, in __call__
2025-01-10 11:44:10 gc_registry-1    |     await self.middleware_stack(scope, receive, send)
2025-01-10 11:44:10 gc_registry-1    |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
2025-01-10 11:44:10 gc_registry-1    |     raise exc
2025-01-10 11:44:10 gc_registry-1    |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
2025-01-10 11:44:10 gc_registry-1    |     await self.app(scope, receive, _send)
2025-01-10 11:44:10 gc_registry-1    |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/sessions.py", line 85, in __call__
2025-01-10 11:44:10 gc_registry-1    |     await self.app(scope, receive, send_wrapper)
2025-01-10 11:44:10 gc_registry-1    |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
2025-01-10 11:44:10 gc_registry-1    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
2025-01-10 11:44:10 gc_registry-1    |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
2025-01-10 11:44:10 gc_registry-1    |     raise exc
2025-01-10 11:44:10 gc_registry-1    |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-01-10 11:44:10 gc_registry-1    |     await app(scope, receive, sender)
2025-01-10 11:44:10 gc_registry-1    |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 756, in __call__
2025-01-10 11:44:10 gc_registry-1    |     await self.middleware_stack(scope, receive, send)
2025-01-10 11:44:10 gc_registry-1    |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 776, in app
2025-01-10 11:44:10 gc_registry-1    |     await route.handle(scope, receive, send)
2025-01-10 11:44:10 gc_registry-1    |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 297, in handle
2025-01-10 11:44:10 gc_registry-1    |     await self.app(scope, receive, send)
2025-01-10 11:44:10 gc_registry-1    |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 77, in app
2025-01-10 11:44:10 gc_registry-1    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
2025-01-10 11:44:10 gc_registry-1    |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
2025-01-10 11:44:10 gc_registry-1    |     raise exc
2025-01-10 11:44:10 gc_registry-1    |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
2025-01-10 11:44:10 gc_registry-1    |     await app(scope, receive, sender)
2025-01-10 11:44:10 gc_registry-1    |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 72, in app
2025-01-10 11:44:10 gc_registry-1    |     response = await func(request)
2025-01-10 11:44:10 gc_registry-1    |                ^^^^^^^^^^^^^^^^^^^
2025-01-10 11:44:10 gc_registry-1    |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 301, in app
2025-01-10 11:44:10 gc_registry-1    |     raw_response = await run_endpoint_function(
2025-01-10 11:44:10 gc_registry-1    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-01-10 11:44:10 gc_registry-1    |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
2025-01-10 11:44:10 gc_registry-1    |     return await dependant.call(**values)
2025-01-10 11:44:10 gc_registry-1    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-01-10 11:44:10 gc_registry-1    |   File "/code/gc_registry/authentication/routes.py", line 29, in login_for_access_token
2025-01-10 11:44:10 gc_registry-1    |     user = authenticate_user(form_data.username, form_data.password, read_session)
2025-01-10 11:44:10 gc_registry-1    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-01-10 11:44:10 gc_registry-1    |   File "/code/gc_registry/authentication/services.py", line 64, in authenticate_user
2025-01-10 11:44:10 gc_registry-1    |     user = get_user(user_name, read_session)
2025-01-10 11:44:10 gc_registry-1    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-01-10 11:44:10 gc_registry-1    |   File "/code/gc_registry/authentication/services.py", line 46, in get_user
2025-01-10 11:44:10 gc_registry-1    |     return read_session.exec(select(User).where(User.name == user_name)).first()
2025-01-10 11:44:10 gc_registry-1    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-01-10 11:44:10 gc_registry-1    |   File "/usr/local/lib/python3.11/site-packages/sqlmodel/orm/session.py", line 66, in exec
2025-01-10 11:44:10 gc_registry-1    |     results = super().execute(
2025-01-10 11:44:10 gc_registry-1    |               ^^^^^^^^^^^^^^^^
2025-01-10 11:44:10 gc_registry-1    |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
2025-01-10 11:44:10 gc_registry-1    |     return self._execute_internal(
2025-01-10 11:44:10 gc_registry-1    |            ^^^^^^^^^^^^^^^^^^^^^^^
2025-01-10 11:44:10 gc_registry-1    |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
2025-01-10 11:44:10 gc_registry-1    |     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-01-10 11:44:10 gc_registry-1    |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-01-10 11:44:10 gc_registry-1    |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
2025-01-10 11:44:10 gc_registry-1    |     result = conn.execute(
2025-01-10 11:44:10 gc_registry-1    |              ^^^^^^^^^^^^^
2025-01-10 11:44:10 gc_registry-1    |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
2025-01-10 11:44:10 gc_registry-1    |     return meth(
2025-01-10 11:44:10 gc_registry-1    |            ^^^^^
2025-01-10 11:44:10 gc_registry-1    |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
2025-01-10 11:44:10 gc_registry-1    |     return connection._execute_clauseelement(
2025-01-10 11:44:10 gc_registry-1    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-01-10 11:44:10 gc_registry-1    |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
2025-01-10 11:44:10 gc_registry-1    |     ret = self._execute_context(
2025-01-10 11:44:10 gc_registry-1    |           ^^^^^^^^^^^^^^^^^^^^^^
2025-01-10 11:44:10 gc_registry-1    |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
2025-01-10 11:44:10 gc_registry-1    |     return self._exec_single_context(
2025-01-10 11:44:10 gc_registry-1    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-01-10 11:44:10 gc_registry-1    |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
2025-01-10 11:44:10 gc_registry-1    |     self._handle_dbapi_exception(
2025-01-10 11:44:10 gc_registry-1    |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
2025-01-10 11:44:10 gc_registry-1    |     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-01-10 11:44:10 gc_registry-1    |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
2025-01-10 11:44:10 gc_registry-1    |     self.dialect.do_execute(
2025-01-10 11:44:10 gc_registry-1    |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
2025-01-10 11:44:10 gc_registry-1    |     cursor.execute(statement, parameters)
2025-01-10 11:44:10 gc_registry-1    | sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "registry_user" does not exist
2025-01-10 11:44:10 gc_registry-1    | LINE 2: FROM registry_user 
2025-01-10 11:44:10 gc_registry-1    |              ^
2025-01-10 11:44:10 gc_registry-1    | 
2025-01-10 11:44:10 gc_registry-1    | [SQL: SELECT registry_user.created_at, registry_user.name, registry_user.primary_contact, registry_user.role, registry_user.hashed_password, registry_user.is_deleted, registry_user.id, registry_user.account_ids, registry_user.organisation 
2025-01-10 11:44:10 gc_registry-1    | FROM registry_user 
2025-01-10 11:44:10 gc_registry-1    | WHERE registry_user.name = %(name_1)s]
2025-01-10 11:44:10 gc_registry-1    | [parameters: {'name_1': 'Admin'}]
2025-01-10 11:44:10 gc_registry-1    | (Background on this error at: https://sqlalche.me/e/20/f405)